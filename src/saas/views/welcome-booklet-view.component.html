<div class="flex h-full flex-col bg-white/10 backdrop-blur-2xl border border-white/20 rounded-2xl shadow-2xl">
    <!-- Header / Tabs -->
    <div class="flex items-center justify-between border-b border-white/20 px-6 py-3 bg-transparent">
        <div class="flex space-x-6">
            <button (click)="setActiveTab('edit')" data-debug-id="tab-edit"
                [class]="activeTab() === 'edit' ? 'border-blue-400 text-blue-400' : 'border-transparent text-white/70 hover:text-white hover:border-white/30'"
                class="whitespace-nowrap py-2 border-b-2 font-medium text-sm transition-colors">
                <span class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                        <path
                            d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z" />
                        <path
                            d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z" />
                    </svg>
                    {{ 'BOOKLET.DataEntry' | translate }}
                </span>
            </button>

            <!-- Annonce -->
            <button (click)="setActiveTab('listing')" data-debug-id="tab-listing"
                [class]="activeTab() === 'listing' ? 'border-blue-400 text-blue-400' : 'border-transparent text-white/70 hover:text-white hover:border-white/30'"
                class="whitespace-nowrap py-2 border-b-2 font-medium text-sm transition-colors">
                <span class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                        <path
                            d="M10 2c-1.716 0-3.408.106-5.07.31C3.806 2.45 3 3.414 3 4.517V17.25a.75.75 0 001.075.676L10 15.08l5.925 2.846A.75.75 0 0017 17.25V4.517c0-1.103-.806-2.068-1.93-2.207A41.403 41.403 0 0010 2z" />
                    </svg>
                    {{ 'NAV.Listing' | translate }}
                </span>
            </button>

            <!-- Welcome Book -->
            <button (click)="setActiveTab('booklet')" data-debug-id="tab-booklet"
                [class]="activeTab() === 'booklet' ? 'border-blue-400 text-blue-400' : 'border-transparent text-white/70 hover:text-white hover:border-white/30'"
                class="whitespace-nowrap py-2 border-b-2 font-medium text-sm transition-colors">
                <span class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                        <path
                            d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" />
                    </svg>
                    {{ 'BOOKLET.WelcomeBook' | translate }}
                </span>
            </button>

            <button (click)="setActiveTab('microsite')" data-debug-id="tab-microsite"
                [class]="activeTab() === 'microsite' ? 'border-blue-400 text-blue-400' : 'border-transparent text-white/70 hover:text-white hover:border-white/30'"
                class="whitespace-nowrap py-2 border-b-2 font-medium text-sm transition-colors">
                <span class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                        <path fill-rule="evenodd"
                            d="M10 2a8 8 0 100 16 8 8 0 000-16zM5.312 8.789a.75.75 0 01.996.11l2.5 2.5a.75.75 0 010 1.06l-2.5 2.5a.75.75 0 01-1.06-1.06l1.97-1.97H3.75a.75.75 0 010-1.5h3.468l-1.97-1.97a.75.75 0 01.114-.996zM13.75 6.5a.75.75 0 000 1.5h.75a.75.75 0 000-1.5h-.75z"
                            clip-rule="evenodd" />
                    </svg>
                    {{ 'BOOKLET.PublicMicrosite' | translate }}
                </span>
            </button>
        </div>

        <div class="flex items-center space-x-3">
            <div *ngIf="saveMessage()" class="text-green-600 text-sm font-medium animate-pulse">{{ saveMessage() }}
            </div>
            <button (click)="save()" [disabled]="isLoading()" data-debug-id="global-save-button"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center shadow-sm disabled:opacity-50">
                <span *ngIf="isLoading()" class="mr-2">...</span>
                {{ isLoading() ? ('COMMON.Loading' | translate) : ('COMMON.Save' | translate) }}
            </button>
        </div>
    </div>

    <!-- Content -->
    <div class="flex-1 overflow-hidden relative">
        @switch (activeTab()) {
        @case ('edit') { <app-welcome-booklet-editor class="h-full block overflow-hidden" /> }
        @case ('listing') { <app-welcome-booklet-listing class="h-full block overflow-y-auto" /> }
        @case ('booklet') { <app-welcome-booklet-preview class="h-full block overflow-y-auto" /> }
        @case ('microsite') { <app-welcome-booklet-microsite class="h-full block overflow-hidden" /> }
        }
    </div>
</div>